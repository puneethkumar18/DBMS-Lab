-- CREATE ORDER PROCESSING DATABASE
CREATE DATABASE ORDER_PROCESSING;

-- USE ORDER_PROCESSING DATABASE
USE ORDER_PROCESSING;


-- CREATE CUSTOMER TABLE
CREATE TABLE CUSTOMER(
CUST INT PRIMARY KEY,
CNAME VARCHAR(20),
CITY VARCHAR(20)
);

-- CREATE ORDER TABLE
CREATE TABLE ORDER1(
ORDER_NO INT PRIMARY KEY,
ODATE DATE,
CUST INT,
ORDER_AMT INT,
FOREIGN KEY(CUST) REFERENCES CUSTOMER(CUST)
ON DELETE CASCADE
ON UPDATE CASCADE
);

-- CREATE ITEM TABLE
CREATE TABLE ITEM(
ITEM INT PRIMARY KEY,
UNITPRICE INT
);


-- CREATE TABLE ORDERITEM TABLE 
CREATE TABLE ORDERITEM(
ORDER_NO INT,
ITEM INT,
QUANTITY INT,
PRIMARY KEY(ORDER_NO,ITEM),
FOREIGN KEY (ORDER_NO) REFERENCES ORDER1(ORDER_NO),
FOREIGN KEY (ITEM) REFERENCES ITEM(ITEM)
ON DELETE CASCADE
ON UPDATE CASCADE
);

-- CREATE TABEL WAREHOUSE
CREATE TABLE WAREHOUSE(
WAREHOUSE INT PRIMARY KEY,
CITY VARCHAR(100)
);

-- CREATE TABLE SHIPMENT TABLE
CREATE TABLE SHIPMENT(
ORDER_NO INT,
WAREHOUSE INT,
SHIPDATE DATE,
PRIMARY KEY(ORDER_NO,WAREHOUSE),
FOREIGN KEY (ORDER_NO) REFERENCES ORDER1(ORDER_NO)
ON DELETE CASCADE,
FOREIGN KEY (WAREHOUSE) REFERENCES WAREHOUSE(WAREHOUSE)
ON DELETE CASCADE
);


-- INSERT DATA INTO CUSTOMER TABLE
INSERT INTO CUSTOMER(CUST,CNAME,CITY)
VALUES
(101,'RAVI','MUMBAI'),
(102,'RAJESH','KOLKATA'),
(103,'RAMESH','CHENNAI'),
(104,'RAJESH','DELHI'),
(105,'ABHISHEK','MYSORE');

-- INSERT DATA INTO ORDER1 TABLE
INSERT INTO ORDER1(ORDER_NO,ODATE,CUST,ORDER_AMT)
VALUES
(201,'2023-04-11',101,1567),
(202,'2023-04-12',102,1667),
(203,'2023-04-13',103,1767),
(204,'2023-04-14',104,1867),
(205,'2023-04-15',105,1967);

-- INSERT DATA INTO ITEM TABLE
INSERT INTO ITEM(ITEM,UNITPRICE)
VALUES
(1001,100),
(1002,200),
(1003,300),
(1004,400),
(1005,500);

-- INSERT DATA INTO ORDERITEM TABLE
INSERT INTO ORDERITEM(ORDER_NO,ITEM,QUANTITY)
VALUES
(201,1001,10),
(202,1002,11),
(203,1003,12),
(204,1004,14),
(205,1005,15);

-- INSERT DATA INTO WAREHOUSE TABLE
INSERT INTO WAREHOUSE(WAREHOUSE,CITY)
VALUES
(901,'RAJAMANDRI'),
(902,'BALLARI'),
(903,'MYSORE'),
(904,'BENGALURU'),
(905,'KOLKATA');